(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{"./documentation/controllers/DocumentationContextBarController.js":function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return u}));var i,o=r("./documentation/stores/DocumentationContextBarStore.js"),a=r("../../node_modules/mobx/lib/mobx.module.js"),n=r("./js/stores/StoreManager.js"),s=r("./js/stores/EditorStore.js"),c=r("./js/stores/ActiveWorkspaceSessionStore.js");let u=(l=(i=class{constructor(){this.entityId=void 0,this.entityUid=void 0,this.entityType=void 0,this.owner=void 0,this.contextData=void 0,this.unsavedDescription=null,this.updateUnsavedDescription=t=>{this.unsavedDescription=t}}get store(){const t=Object(n.resolveStoreInstance)(c.default).activeEditor,e=Object(n.resolveStoreInstance)(s.default).find(t);if(e){const t=e.resource,r="v2implview://stubView/";if(t.startsWith(r)){const[e,i]=t.replace(r,"").split("/");return new o.default(e,i,this.contextData)}}return null}setContextData(t){this.contextData=t}willDestroy(){this.codegen=void 0}get contextBarUnsavedDescription(){return this.unsavedDescription}}).prototype,T="store",d=[a.computed],p=Object.getOwnPropertyDescriptor(i.prototype,"store"),O=i.prototype,E={},Object.keys(p).forEach((function(t){E[t]=p[t]})),E.enumerable=!!E.enumerable,E.configurable=!!E.configurable,("value"in E||E.initializer)&&(E.writable=!0),E=d.slice().reverse().reduce((function(t,e){return e(l,T,t)||t}),E),O&&void 0!==E.initializer&&(E.value=E.initializer?E.initializer.call(O):void 0,E.initializer=void 0),void 0===E.initializer&&(Object.defineProperty(l,T,E),E=null),i);var l,T,d,p,O,E},"./documentation/stores/DocumentationContextBarStore.js":function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return u}));var i,o,a=r("../../node_modules/mobx/lib/mobx.module.js"),n=r("./documentation/constants.js"),s=r("./documentation/stores/DocumentationMasterStore.js");function c(t,e,r,i,o){var a={};return Object.keys(i).forEach((function(t){a[t]=i[t]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(t,e,r)||r}),a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,e,a),a=null),a}let u=((o=class{constructor(t,e,r){this.entityType=t,this.entityUid=e,this.contextData=r,this.masterStore=s.default.getInstance()}get isOffline(){return this.masterStore.isOffline}get isEditable(){return this.masterStore.isEditable}get activeEnvironmentVariables(){return this.masterStore.activeEnvironmentVariables}get isUserMemberOfActiveWorkspace(){return this.masterStore.isUserMemberOfActiveWorkspace}get entityData(){if(this.entityType&&!n.DOCUMENTATION_ENTITY[this.entityType.toUpperCase()])return{isLoading:!1,error:null,data:null};let{data:t,status:e}=this.masterStore.getData({uid:this.entityUid,type:this.entityType,parentCollectionUid:this.contextData&&(this.contextData.parentCollectionUid||this.contextData.collectionUid),versionTag:n.DOCUMENTATION_LATEST_VERSION_STRING},{withPublishedData:!0,source:"contextBar"});return{isLoading:e===n.DOCUMENTATION_STATUS.LOADING,error:e===n.DOCUMENTATION_STATUS.ERROR,data:t}}get parentCollectionData(){if(this.entityType&&!n.DOCUMENTATION_ENTITY[this.entityType.toUpperCase()])return{isLoading:!1,error:null,data:null};const{data:t}=this.entityData;return this.entityType===n.DOCUMENTATION_ENTITY.COLLECTION?t:t?this.masterStore.getData({uid:this.contextData&&(this.contextData.parentCollectionUid||this.contextData.collectionUid),type:n.DOCUMENTATION_ENTITY.COLLECTION,versionTag:n.DOCUMENTATION_LATEST_VERSION_STRING},{source:"contextBar"}).data:void 0}isEntityLoading(t){return this.masterStore.loadingStateForEntity[t]}updateLoadingStateForEntity(t,e=!1){this.masterStore.updateLoadingStateForEntity(t,e)}async updateDescription(t){this.masterStore.updateLoadingStateForEntity(this.entityUid,!0),await this.masterStore.updateDescription({type:this.entityType,uid:this.entityUid},t).then((()=>{this.masterStore.updateLoadingStateForEntity(this.entityUid,!1)}))}}).masterStoreGetMethod={[n.DOCUMENTATION_ENTITY.COLLECTION]:"getCollection",[n.DOCUMENTATION_ENTITY.FOLDER]:"getFolder",[n.DOCUMENTATION_ENTITY.REQUEST]:"getRequest"},c((i=o).prototype,"entityData",[a.computed],Object.getOwnPropertyDescriptor(i.prototype,"entityData"),i.prototype),c(i.prototype,"parentCollectionData",[a.computed],Object.getOwnPropertyDescriptor(i.prototype,"parentCollectionData"),i.prototype),i)},"./documentation/stores/DocumentationMasterStore.js":function(t,e,r){"use strict";r.r(e),function(t){r.d(e,"default",(function(){return v}));var i,o,a,n,s,c,u=r("../../node_modules/mobx/lib/mobx.module.js"),l=r("./js/stores/StoreManager.js"),T=r("./js/stores/CurrentUserStore.js"),d=r("./js/stores/SyncStatusStore.js"),p=r("./js/stores/ActiveWorkspaceStore.js"),O=r("./runtime-repl/environment/datastores/ActiveEnvironmentStore.js"),E=r("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),N=r("./documentation/constants.js"),I=r("./documentation/services/DocumentationService.js"),D=r("./runtime-repl/collection/_api/CollectionStoreV2.js"),h=r("./runtime-repl/folder/_api/FolderStoreV2.js"),y=r("./runtime-repl/request-http/_api/RequestStoreV2.js"),S=r("./runtime-repl/collection/_api/CollectionInterfaceV2.ts"),f=r("./runtime-repl/folder/_api/FolderInterfaceV2.ts"),_=r("./runtime-repl/request-http/_api/RequestInterfaceV2.ts"),b=r("./runtime-repl/collection/datastores/models/CollectionPermissions.js");function m(){return m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},m.apply(this,arguments)}function C(t,e,r,i){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function U(t,e,r,i,o){var a={};return Object.keys(i).forEach((function(t){a[t]=i[t]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(t,e,r)||r}),a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,e,a),a=null),a}let v=(c=class e{constructor(){C(this,"collections",o,this),C(this,"folders",a,this),C(this,"requests",n,this),C(this,"loadingStateForEntity",s,this)}static getInstance(){return void 0===e.instance&&(e.instance=new e),e.instance}get isOffline(){return!Object(l.resolveStoreInstance)(d.default).isSocketConnected}get isEditable(){const t=Object(l.resolveStoreInstance)(T.default).isLoggedIn;return!this.isOffline&&t}get activeEnvironmentVariables(){return Object(l.resolveStoreInstance)(O.default).enabledValues}get isUserMemberOfActiveWorkspace(){return Object(l.resolveStoreInstance)(p.default).isMember}getData(t,e={withPublishedData:!1}){const{uid:r,parentCollectionUid:i,type:o,mode:a,versionTag:n=N.DOCUMENTATION_LATEST_VERSION_STRING}=t,s=this._findItem(t),{withPublishedData:c,source:u}=e;s&&"contextBar"===u||(!s&&this._createInitialState({uid:r,type:o,versionTag:n}),n===N.DOCUMENTATION_LATEST_VERSION_STRING?this._fetchDataFromInterface({uid:r,parentCollectionUid:i,type:o,mode:a,source:u}):this._fetchDataFromSync({uid:r,type:o,versionTag:n}));let l=s||this._findItem(t);return o===N.DOCUMENTATION_ENTITY.COLLECTION&&n===N.DOCUMENTATION_LATEST_VERSION_STRING&&c&&l&&!l.publishedData&&this._fetchPublishedData(r),l}_findItem(t){const{uid:e,type:r,versionTag:i=N.DOCUMENTATION_LATEST_VERSION_STRING}=t;switch(r){case N.DOCUMENTATION_ENTITY.COLLECTION:return this.collections[`${e}:${i}`];case N.DOCUMENTATION_ENTITY.FOLDER:return this.folders[`${e}:${i}`];case N.DOCUMENTATION_ENTITY.REQUEST:return this.requests[`${e}:${i}`];default:throw new TypeError(`DocumentationMasterStore~_findItem: unknown entity type - ${r}`)}}_createInitialState(t){const{uid:e,type:r,versionTag:i=N.DOCUMENTATION_LATEST_VERSION_STRING}=t;switch(r){case N.DOCUMENTATION_ENTITY.COLLECTION:this.collections[`${e}:${i}`]={status:N.DOCUMENTATION_STATUS.LOADING,data:void 0};break;case N.DOCUMENTATION_ENTITY.FOLDER:this.folders[`${e}:${i}`]={status:N.DOCUMENTATION_STATUS.LOADING,data:void 0};break;case N.DOCUMENTATION_ENTITY.REQUEST:this.requests[`${e}:${i}`]={status:N.DOCUMENTATION_STATUS.LOADING,data:void 0};break;default:throw new TypeError(`DocumentationMasterStore~_createInitialState: unknown entity type - ${r}`)}}async _fetchDataFromInterface(t){const{uid:e,parentCollectionUid:r,type:i,mode:o}=t,a=m({},t,{versionTag:N.DOCUMENTATION_LATEST_VERSION_STRING});this._updateStatus(a,N.DOCUMENTATION_STATUS.LOADING);try{let n,s;const c="network"===o?D.getOneFromSyncUncached:D.getOne;switch(i){case N.DOCUMENTATION_ENTITY.COLLECTION:"contextBar"===t.source&&(s=["response","request"]),n=await c(e,{permissions:[b.CollectionPermissionConstants.PUBLISH,b.CollectionPermissionConstants.EDIT],exclude:s});break;case N.DOCUMENTATION_ENTITY.FOLDER:"contextBar"===t.source&&(s=["response","request"]),n=await Object(h.getOne)(e,r,{exclude:s});break;case N.DOCUMENTATION_ENTITY.REQUEST:"contextBar"===t.source&&(s=["response"]),n=await Object(y.getOne)(e,r,{exclude:s});break;default:throw new TypeError(`DocumentationMasterStore~_fetchDataFromInterface: unknown entity type - ${i}`)}this._updateData(a,n),this._updateStatus(a,N.DOCUMENTATION_STATUS.DATA_FETCHED)}catch(t){pm.logger.error("~_fetchDataFromInterface: Unable to fetch data",t),this._updateStatus(a,N.DOCUMENTATION_STATUS.ERROR)}}async _fetchDataFromSync(t){const{uid:e,type:r,versionTag:i}=t;if(this._updateStatus(t,N.DOCUMENTATION_STATUS.LOADING),this.isOffline)this._updateStatus(t,N.DOCUMENTATION_STATUS.DATA_NOT_AVAILABLE_OFFLINE);else try{const[o,...a]=e.split("-"),n=a.join("-"),s=(await Object(I.fetchData)(r,n,o,{populate:!0,versionTag:i})).body.data,c=this._transformData(s,r);this._updateData(t,c),this._updateStatus(t,N.DOCUMENTATION_STATUS.DATA_FETCHED)}catch(e){pm.logger.error("~_fetchDataFromSync: Unable to fetch data from sync",e),this._updateStatus(t,N.DOCUMENTATION_STATUS.ERROR)}}async _fetchPublishedData(e){try{let r=await Object(I.fetchPublishedData)(e);r=t.get(r,"body.collections");const i={uid:e,type:N.DOCUMENTATION_ENTITY.COLLECTION,versionTag:N.DOCUMENTATION_LATEST_VERSION_STRING},o=t.get(this._findItem(i),"data");o&&(o.publishedData=r,this._updateData(i,o))}catch(t){pm.logger.error(`DocumentationMasterStore~_fetchPublishedData: error in fetching published data for collection with uid - ${e}`)}}_transformData(t,e){const r=t.folders,i=t.requests,o=t.responses;function a(t){const e=r.find((e=>e.id===t)),i=e.folders_order.map((t=>a(t))),o=e.order.map((t=>n(t)));return m({},e,{folders:i,requests:o,type:N.DOCUMENTATION_ENTITY.FOLDER})}function n(t){const e=i.find((e=>e.id===t));return m({},e,{responses:e.responses,type:N.DOCUMENTATION_ENTITY.REQUEST})}return m({},t,{uid:t.id,folders:e!==N.DOCUMENTATION_ENTITY.REQUEST?t.folders_order.map((t=>a(t))):void 0,requests:e!==N.DOCUMENTATION_ENTITY.REQUEST?t.order.map((t=>n(t))):void 0,responses:e===N.DOCUMENTATION_ENTITY.REQUEST?o:void 0,type:N.DOCUMENTATION_ENTITY.COLLECTION})}_updateStatus(t,e){const{uid:r,type:i,versionTag:o}=t,a=`${r}:${o}`;let n;switch(i){case N.DOCUMENTATION_ENTITY.COLLECTION:n=this.collections;break;case N.DOCUMENTATION_ENTITY.FOLDER:n=this.folders;break;case N.DOCUMENTATION_ENTITY.REQUEST:n=this.requests;break;default:throw new TypeError(`DocumentationMasterStore~_updateStatus: unknown entity type - ${i}`)}if(!n[a])throw new Error(`DocumentationMasterStore~_updateStatus: entry found for uid - ${r}, type - ${i}, versionTag - ${o}. Initialize state using _createInitialState method.`);n[a].status=e}updateLoadingStateForEntity(t,e){this.loadingStateForEntity[t]=e}_updateData(t,e){const{uid:r,type:i,versionTag:o}=t,a=`${r}:${o}`;let n;switch(i){case N.DOCUMENTATION_ENTITY.COLLECTION:n=this.collections;break;case N.DOCUMENTATION_ENTITY.FOLDER:n=this.folders;break;case N.DOCUMENTATION_ENTITY.REQUEST:n=this.requests;break;default:throw new TypeError(`DocumentationMasterStore~_updateData: unknown entity type - ${i}`)}if(!n[a])throw new Error(`DocumentationMasterStore~_updateData: no entry found for uid - ${r}, type - ${i}, versionTag - ${o}. Initialize state using _createInitialState method.`);n[a].data=e}updateName(t,e){const{type:r,uid:i}=t;let o;switch(r){case N.DOCUMENTATION_ENTITY.COLLECTION:o=S.updateCollection;break;case N.DOCUMENTATION_ENTITY.FOLDER:o=f.updateFolder;break;case N.DOCUMENTATION_ENTITY.REQUEST:o=_.updateRequest;break;default:throw new TypeError(`DocumentationMasterStore~updateName: unknown entity type - ${r}`)}return o(i,{name:e})}async updateDescription(t,e){const{type:r,uid:i}=t;let o;switch(r){case N.DOCUMENTATION_ENTITY.COLLECTION:o=S.updateCollection;break;case N.DOCUMENTATION_ENTITY.FOLDER:o=f.updateFolder;break;case N.DOCUMENTATION_ENTITY.REQUEST:o=_.updateRequest;break;default:throw new TypeError(`DocumentationMasterStore~updateName: unknown entity type - ${r}`)}return o(i,{description:e})}get activeWorkspaceId(){return Object(l.resolveStoreInstance)(E.default).id}},c.instance=void 0,o=U((i=c).prototype,"collections",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),a=U(i.prototype,"folders",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),n=U(i.prototype,"requests",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),s=U(i.prototype,"loadingStateForEntity",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),U(i.prototype,"isOffline",[u.computed],Object.getOwnPropertyDescriptor(i.prototype,"isOffline"),i.prototype),U(i.prototype,"isEditable",[u.computed],Object.getOwnPropertyDescriptor(i.prototype,"isEditable"),i.prototype),U(i.prototype,"_updateStatus",[u.action],Object.getOwnPropertyDescriptor(i.prototype,"_updateStatus"),i.prototype),U(i.prototype,"updateLoadingStateForEntity",[u.action],Object.getOwnPropertyDescriptor(i.prototype,"updateLoadingStateForEntity"),i.prototype),U(i.prototype,"_updateData",[u.action],Object.getOwnPropertyDescriptor(i.prototype,"_updateData"),i.prototype),U(i.prototype,"activeWorkspaceId",[u.computed],Object.getOwnPropertyDescriptor(i.prototype,"activeWorkspaceId"),i.prototype),i)}.call(this,r("./node_modules/lodash/lodash.js"))}}]);
//# sourceMappingURL=DocumentationContextBarController-b464d584a2ee6819fa1f.min.js.map